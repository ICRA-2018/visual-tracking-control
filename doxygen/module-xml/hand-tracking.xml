<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="yarpmanifest.xsl"?>

<module>
    <name>hand-tracking</name>
    <doxygen-group>icub-module</doxygen-group>
    <description>A visual end-effector tracker using a 3D model-aided particle filter.</description>
    <copypolicy>BSD 3-clause "New" or "Revised" License</copypolicy>
    <version> 0.6.0.0</version>

    <description-long>
    This module run a recursive Bayesian filter, a particle filter, to track the robot's end-effector.

    For each particle filter recursion

    1) we render, for each particle, an image of the 3D mesh model of the end-effector as it would appear from the robot’s viewpoints (likewise in augmented reality contexts);

    2) we then use this state representation to directly estimate the 6D pose (position and orientation) of the end-effector in the robot operative space using 2D image descriptors.

    In particular, we use HOG to compare the rendered images with the robot’s camera images and, as a result, the particles which are more likely to represent the end-effector will have higher weight.
    </description-long>

    <arguments>
        <param default="" desc="use stored data played with yarpdataplayer."> play </param>
        <param default="left" desc="left or right to slect the corresponding iCub eye."> camsel </param>
    </arguments>

    <authors>
        <author email="claudio.fantacci@iit.it"> Claudio Fantacci </author>
    </authors>

    <data>
        <input>
            <type>Image</type>
            <port carrier="mcast">/hand-tracking/_camsel_/img:i</port>
            <description>Input image from the camera.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/InitiCubArm/cam/_camsel_/torso:i</port>
            <description>Read torso encorder values.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/InitiCubArm/cam/_camsel_/right_arm:i</port>
            <description>Read right arm encorder values.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/VisualProprioception/_camsel_/head:i</port>
            <description>Read neck and eyes encorder values.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/VisualProprioception/_camsel_/right_arm:i</port>
            <description>Read right arm encorder values.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/VisualProprioception/_camsel_/torso:i</port>
            <description>Read torso encorder values.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/ResamplingWithPrior/InitiCubArm/cam/_camsel_/torso:i</port>
            <description>Read torso encorder values.</description>
        </input>
        <input>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/ResamplingWithPrior/InitiCubArm/cam/_camsel_/right_arm:i</port>
            <description>Read right arm encorder values.</description>
        </input>
        <output>
            <type>Bottle</type>
            <port carrier="tcp">/hand-tracking/_camsel_/result/estimates:o</port>
            <description>Pose estimates of the right end-effector of iCub.</description>
        </output>
    </data>

    <services>
        <server>
            <type>VisualSISParticleFilterIDL</type>
            <idl>VisualSISParticleFilterIDL.thrift</idl>
            <port>/hand-tracking/_camsel_/cmd:i</port>
            <description>Command port to control the 3D model-aided SIS particle filter.</description>
        </server>
    </services>
</module>
